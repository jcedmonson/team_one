pipeline {
    agent any
    stages {
	    stage("Checkout DataApi"){
	    	steps {
	    	    git branch: 'main',
				url: '/home/osboxes/Desktop/Project/team_one'
	    	}
	    }
	    stage ("Gradle Build - DataApi") {
	    	steps {
				sh 'gradle -b /home/osboxes/Desktop/Project/team_one/project-data-service/build.gradle clean build'
			}
	    }
	    stage ("Gradle Bootjar-Package - DataApi") {
	    	steps {
				sh 'gradle -b /home/osboxes/Desktop/Project/team_one/project-data-service/build.gradle bootjar'
			}
	    }
		stage('Deploy DataApi'){
			steps {
				sh 'gradle -b project-data-service/build.gradle build -x test'
			}
			steps {
				sh 'TODO - run app AuthAPI as java'
			}
		}
		stage("Checkout AuthApi"){
	    	steps {
	    	    git branch: 'main',
				url: '/home/osboxes/Desktop/Project/team_one'
	    	}
	    }
	    stage ("Gradle Build - AuthApi") {
	    	steps {
				sh 'gradle -b /home/osboxes/Desktop/Project/team_one/project-auth-service/build.gradle clean build'
			}
	    }
	    stage ("Gradle Bootjar-Package - AuthApi") {
	    	steps {
				sh 'gradle -b /home/osboxes/Desktop/Project/team_one/project-auth-service/build.gradle bootjar'
			}
	    }
		stage('Deploy AuthApi'){
			steps {
				sh 'gradle -b project-auth-service/build.gradle build -x test'
			}
			steps {
			    sh 'TODO - run app AuthAPI as java'
			}

		}	    	    
        stage('Endpoints Testing - Python MockClient') {
            steps {
                sh 'echo "Endpoints Testing - Python MockClient"'
                sh 'python3 --version'
                sh '''
                    python3 ~/Desktop/Project/team_one/python/MockClient.py
                '''
            }
        }
    }
}